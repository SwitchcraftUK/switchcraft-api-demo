{"version":3,"sources":["data/user-details.js","components/TopBar.js","data/fake-transactions.js","config.js","components/LoadingSpinner.js","components/Button.js","utils/make-request.js","components/Quote.js","components/Transactions.js","components/EstimateSummary.js","components/TopQuoteDetails.js","components/OutlineButton.js","components/SwitchUserButton.js","components/SwitchUser.js","index.js","components/App.js"],"names":["userDetails","address","postcode","addressLine1","bankDetails","accountNumber","sortCode","identity","title","firstName","lastName","email","phoneNumber","dateOfBirth","monthsAtCurrentAddress","TopBar","className","fakeTransactions","date","to","amount","reference","API_VERSION","process","REACT_APP_API_VERSION","BACKEND_URL","ENERGY_BACKEND_URL","ENERGY_QUOTE_BACKEND_URL","ENERGY_SWITCH_BACKEND_URL","LoadingSpinner","children","Button","onClick","makeRequest","data","url","a","method","fetch","headers","body","JSON","stringify","result","json","Quote","useState","quoteState","setQuoteState","isLoading","setIsLoadingState","getQuoteResult","hasUserAcceptedTermsAndConditions","quote","localStorage","setItem","showSwitchButton","tariffs","length","cheapestQuote","annualSaving","toFixed","TransactionRow","transaction","showQuote","Transcations","map","index","key","FuelEstimateSummary","fuelName","fuelEstimate","hasFuel","supplierName","tariffName","paymentType","kwUsagePerMonth","EstimateSummary","estimate","elecEstimate","gasEstimate","TopQuoteDetails","topTariff","src","supplierLogoUrl","alt","annualCost","OutlineButton","postSwitchUser","userId","tariffId","SwitchUserButton","switchState","setSwitchState","switchUserClicked","switchResponse","success","message","SwitchUser","parse","getItem","ReactDOM","render","path","document","getElementById"],"mappings":"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","file":"static/js/main.6c9f6bea.chunk.js","sourcesContent":["export const userDetails = {\n  address: {\n    postcode: 'E28EB',\n    addressLine1: '192a Kingsland Road'\n  },\n  bankDetails: {\n    accountNumber: '14457846',\n    sortCode: '40-47-84'\n  },\n  identity: {\n    title: 'Mr',\n    firstName: 'John',\n    lastName: 'Smith',\n    email: 'john.smith@email.co.uk',\n    phoneNumber: '07950450297',\n    dateOfBirth: '1989-05-25',\n    monthsAtCurrentAddress: 50\n  }\n};\n","import React from 'react';\nimport { userDetails } from '../data/user-details';\nimport './TopBar.css';\n\nexport const TopBar = () => {\n  return (\n    <header className='c-top-bar'>\n      <h3>Switchcraft Bank Account</h3>\n      <p>\n        {userDetails.bankDetails.sortCode} {userDetails.bankDetails.accountNumber}\n      </p>\n    </header>\n  );\n};\n","export const fakeTransactions = [\n  {\n    date: 'Today',\n    to: 'Tesco',\n    amount: '3.00'\n  },\n  {\n    date: 'Yesterday',\n    to: 'British Gas',\n    amount: '70.00',\n    reference: 'Gas and Electric'\n  },\n  {\n    date: '18 February',\n    to: 'Jess Smith',\n    amount: '300.00',\n    reference: 'Holiday'\n  },\n  {\n    date: '17 February',\n    to: 'Landlord',\n    amount: '1,000.00',\n    reference: 'House Rent'\n  }\n];\n","export const BASE_BACKEND_URL = process.env.REACT_APP_BASE_BACKEND_URL || 'http://localhost:3000';\n\nexport const API_VERSION = process.env.REACT_APP_API_VERSION || 'v1';\n\nconst BACKEND_URL = `${BASE_BACKEND_URL}/api/${API_VERSION}`;\n\nexport const ENERGY_BACKEND_URL = `${BACKEND_URL}/energy`;\n\nexport const ENERGY_QUOTE_BACKEND_URL = `${ENERGY_BACKEND_URL}/quote`;\n\nexport const ENERGY_SWITCH_BACKEND_URL = `${ENERGY_BACKEND_URL}/switch`;\n","import React from 'react';\nimport './LoadingSpinner.css';\n\nexport const LoadingSpinner = ({\n  children\n}) => <div className='c-loading'>{\n  children || 'Loading...'\n}</div>;\n","import React from 'react';\nimport './Button.css';\n\nexport const Button = ({\n  onClick,\n  children\n}) => (\n  <button className='c-btn' onClick={onClick}>\n    {children}\n  </button>\n);\n","export const makeRequest = async (\n  data,\n  url,\n  method = 'POST'\n) => {\n  const result = (await fetch(url, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'switchcraft-test-key'\n    },\n    body: JSON.stringify(data),\n    method\n  })).json();\n  return result;\n};\n","import React, { useState } from 'react';\nimport { ENERGY_QUOTE_BACKEND_URL } from '../config';\nimport { LoadingSpinner } from './LoadingSpinner';\nimport { userDetails } from '../data/user-details';\nimport './Quote.css';\nimport { Button } from './Button';\nimport { makeRequest } from '../utils/make-request';\nimport { Link } from 'react-router-dom';\n\nconst getQuote = () => {\n  const data = {\n    hasUserAcceptedTermsAndConditions: true,\n    address: userDetails.address\n  };\n  return makeRequest(data, ENERGY_QUOTE_BACKEND_URL);\n};\n\nexport const Quote = () => {\n  const [quoteState, setQuoteState] = useState(null);\n  const [isLoading, setIsLoadingState] = useState(false);\n\n  const getQuoteResult = async () => {\n    setIsLoadingState(true);\n    const quote = await getQuote();\n    setQuoteState(quote);\n    localStorage.setItem('quoteState', JSON.stringify(quote));\n    setIsLoadingState(false);\n  };\n\n  const showSwitchButton = quoteState && quoteState.tariffs && quoteState.tariffs.length > 0;\n  const cheapestQuote = showSwitchButton && quoteState.tariffs[0];\n  return (\n    <div className={`c-quote${\n      showSwitchButton ? ' c-quote__button-shown' : ''\n    }`}>\n      {\n        isLoading\n          ? <LoadingSpinner>Getting your quote...</LoadingSpinner>\n          : showSwitchButton\n            ? <Link className='c-quote__switch-user' to='/switch'>\n              Switch my energy and save £{cheapestQuote.annualSaving.toFixed(0)}\n            </Link>\n            : (\n              <Button onClick={getQuoteResult}>\n                <span className='c-quote__save-more'>Want to save money on your energy?</span>\n                <br />\n                Click here to find out how much you could save\n              </Button>\n            )\n      }\n    </div>\n  );\n};\n","import React from 'react';\nimport './Transactions.css';\nimport { fakeTransactions } from '../data/fake-transactions';\nimport { Quote } from './Quote';\n\nconst TransactionRow = ({\n  transaction,\n  showQuote\n}) => (\n  <div className='c-transaction-row'>\n    <div className='c-transaction-row__date'>{ transaction.date }</div>\n    <div className='c-transaction-row__inner'>\n      <div>\n        <p className='c-transaction-row__to'>{ transaction.to }</p>\n        {\n          transaction.reference &&\n          <p className='c-transaction-row__reference'>\n            { transaction.reference }\n          </p>\n        }\n      </div>\n      <div>\n        <p className='c-transaction-row__amount'>£{ transaction.amount }</p>\n      </div>\n    </div>\n    {\n      showQuote && <Quote />\n    }\n  </div>\n);\n\nexport const Transcations = () => (\n  <div className='c-transactions'>\n    { fakeTransactions.map(\n      (transaction, index) =>\n        <TransactionRow key={index}\n          transaction={transaction}\n          showQuote={index === 1 } />\n    ) }\n  </div>\n);\n","import React from 'react';\nimport './EstimateSummary.css';\n\nconst FuelEstimateSummary = ({\n  fuelName,\n  fuelEstimate\n}) => fuelEstimate.hasFuel ? (\n  <tr>\n    <td>{fuelName}</td>\n    <td>{fuelEstimate.supplierName}</td>\n    <td>{fuelEstimate.tariffName}</td>\n    <td>{fuelEstimate.paymentType}</td>\n    <td>{fuelEstimate.kwUsagePerMonth.toFixed(0)}kW</td>\n  </tr>\n) : null;\n\nexport const EstimateSummary = ({\n  estimate\n}) => (\n  <div className='c-estimate-summary'>\n    <p>We have made this estimate based on these details:</p>\n    <table className='c-estimate-summary__table'>\n      <thead>\n        <tr>\n          <th>Fuel Type</th>\n          <th>Supplier Name</th>\n          <th>Tariff Name</th>\n          <th>Payment Type</th>\n          <th>KwH Usage Per Month</th>\n        </tr>\n      </thead>\n      <tbody>\n        <FuelEstimateSummary fuelName='Electricity' fuelEstimate={estimate.elecEstimate} />\n        <FuelEstimateSummary fuelName='Gas' fuelEstimate={estimate.gasEstimate} />\n      </tbody>\n    </table>\n  </div>\n);\n","import React from 'react';\nimport './TopQuoteDetails.css';\n\nexport const TopQuoteDetails = ({\n  topTariff\n}) => (\n  <div className='c-top-quote'>\n    <div className='c-top-quote__top-row'>\n      <div className='c-top-quote__row-item'>\n        <img className='c-top-quote__supplier-logo'\n          src={topTariff.supplierLogoUrl} alt='Supplier logo' />\n      </div>\n      <div className='c-top-quote__row-item'>\n        <div className='c-top-quote__cost-text'>Estimated cost</div>\n        <div className='c-top-quote__cost'>\n          <span className='c-top-quote__currency'>£</span>\n          {topTariff.annualCost.toFixed(0)}\n        </div>\n        <div className='c-top-quote__cost-text'>per year</div>\n      </div>\n      <div className='c-top-quote__row-item'>\n        <div className='c-top-quote__cost-text'>You save</div>\n        <div className='c-top-quote__saving'>\n          <span className='c-top-quote__currency'>£</span>\n          {topTariff.annualSaving.toFixed(0)}\n        </div>\n        <div className='c-top-quote__cost-text'>per year</div>\n      </div>\n    </div>\n\n    <div className='c-top-quote__bottom-row'>\n      <span className='c-top-quote__supplier-name'>{topTariff.supplierName}</span>\n      &nbsp;\n      {topTariff.tariffName}\n    </div>\n  </div>\n);\n","import React from 'react';\nimport './Button.css';\nimport './OutlineButton.css';\n\nexport const OutlineButton = ({\n  onClick,\n  children\n}) => (\n  <button className='c-btn c-outline-btn' onClick={onClick}>\n    {children}\n  </button>\n);\n","import React, { useState } from 'react';\nimport { ENERGY_SWITCH_BACKEND_URL } from '../config';\nimport { LoadingSpinner } from './LoadingSpinner';\nimport { userDetails } from '../data/user-details';\nimport './SwitchUserButton.css'\nimport { OutlineButton } from './OutlineButton';\nimport { makeRequest } from '../utils/make-request';\n\nconst postSwitchUser = (userId) => {\n  const data = {\n    userId,\n    tariffId: '1a47e5b80cdbd80006c542a1',\n    ...userDetails.identity,\n    bankDetails: userDetails.bankDetails\n  };\n  return makeRequest(data, ENERGY_SWITCH_BACKEND_URL);\n};\n\nexport const SwitchUserButton = ({\n  topTariff,\n  userId\n}) => {\n  const [switchState, setSwitchState] = useState(null);\n  const [isLoading, setIsLoadingState] = useState(false);\n\n  const switchUserClicked = async () => {\n    setIsLoadingState(true);\n    const switchResponse = await postSwitchUser(userId);\n    setSwitchState(switchResponse);\n    setIsLoadingState(false);\n  };\n\n  return (\n    <div className='c-switch-user-button'>\n      {\n        isLoading\n          ? <LoadingSpinner>Switching your energy...</LoadingSpinner>\n          : (\n            switchState\n          )\n            ? (\n              <div className='c-switch-user-button__result'>\n                {\n                  switchState.success\n                    ? 'Switch successful'\n                    : switchState.message\n                }\n              </div>\n            )\n            : (\n              <div className='c-switch-user-button__btn'>\n                <OutlineButton onClick={switchUserClicked}>\n                  Switch now and save £{ topTariff.annualSaving.toFixed(0) }\n                </OutlineButton>\n              </div>\n            )\n      }\n    </div>\n  );\n};\n","import React from 'react';\nimport { EstimateSummary } from './EstimateSummary';\nimport { TopQuoteDetails } from './TopQuoteDetails';\nimport { SwitchUserButton } from './SwitchUserButton';\nimport { userDetails } from '../data/user-details';\nimport './SwitchUser.css';\n\nexport const SwitchUser = () => {\n  const quoteState = JSON.parse(localStorage.getItem('quoteState'));\n  const topTariff = quoteState.tariffs[0];\n\n  return (\n    <div className='c-switch-user'>\n      <div className='c-switch-user__top-quote-text'>\n        Your top quote for {userDetails.address.addressLine1}:\n      </div>\n      <TopQuoteDetails topTariff={topTariff} />\n      <EstimateSummary estimate={quoteState.estimate} />\n      <SwitchUserButton userId={quoteState.userId} topTariff={topTariff} />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport './App.css';\nimport { TopBar } from './TopBar';\nimport { Transcations } from './Transactions';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\nimport { SwitchUser } from './SwitchUser';\n\nexport const App = () => {\n  return (\n    <Router>\n      <div className='c-app'>\n        <TopBar />\n        <div className='c-app__inner'>\n          <Switch>\n            <Route path='/switch'>\n              <SwitchUser />\n            </Route>\n            <Route path='/'>\n              <Transcations />\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  );\n};\n"],"sourceRoot":""}