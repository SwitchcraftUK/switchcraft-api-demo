(this["webpackJsonpswitcraft-api-demo"]=this["webpackJsonpswitcraft-api-demo"]||[]).push([[0],{19:function(e,t,a){},23:function(e,t,a){e.exports=a(47)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),s=a.n(r),l=(a(28),a(29),a(2)),o=(a(30),function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:"32px",version:"1.1",viewBox:"0 0 32 32",width:"32px",xmlSpace:"preserve"},c.a.createElement("path",{d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"}))}),i=a(10),u=Object(n.createContext)(),m=function(e){var t=e.reducer,a=e.initialState,r=e.children;return c.a.createElement(u.Provider,{value:Object(n.useReducer)(t,a)},r)},d=function(){return Object(n.useContext)(u)},p=function(){var e=d(),t=Object(l.a)(e,1)[0].bankDetails;return c.a.createElement("header",{className:"c-top-bar"},c.a.createElement("h3",null,"Switchcraft Bank Account"),c.a.createElement("p",null,t.sortCode," ",t.accountNumber),c.a.createElement(i.b,{to:"/details",className:"c-top-bar__burger-icon"},c.a.createElement(o,null)))},E=(a(36),[{date:"Today",to:"Tesco",amount:"3.00"},{date:"Yesterday",to:"British Gas",amount:"70.00",reference:"Gas and Electric"},{date:"18 February",to:"Jess Smith",amount:"300.00",reference:"Holiday"},{date:"17 February",to:"Landlord",amount:"1,000.00",reference:"House Rent"}]),f=a(7),h=a.n(f),v=a(11),_=Object({NODE_ENV:"production",PUBLIC_URL:"/switchcraft-api-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_BACKEND_URL:"https://api-staging.switchcraft.co.uk"}).REACT_APP_API_VERSION||"v1",b="".concat("https://api-staging.switchcraft.co.uk","/api/").concat(_),N="".concat(b,"/energy"),w="".concat(N,"/quote"),y="".concat(N,"/switch"),g=(a(38),function(e){var t=e.children;return c.a.createElement("div",{className:"c-loading"},t||"Loading...")}),S=(a(39),a(19),function(e){var t=e.onClick,a=e.children;return c.a.createElement("button",{className:"c-btn",onClick:t},a)}),O=function(){var e=Object(v.a)(h.a.mark((function e(t,a){var n,c,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"POST",e.next=3,fetch(a,{headers:{"Content-Type":"application/json",Authorization:"switchcraft-test-key"},body:JSON.stringify(t),method:n});case 3:return c=e.sent,e.next=6,c.json();case 6:if(r=e.sent,200===c.status){e.next=9;break}throw r;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(e){return{quote:e,type:"SET_QUOTE"}},k=a(8),x=function(e,t){var a=function(e,t){switch(t.type){case"SET_ADDRESS":return Object(k.a)({},e,{address:Object(k.a)({},t.address,{postcode:t.address.postcode?t.address.postcode.replace(/\s/g,"").toUpperCase():null}),quote:null});case"SET_QUOTE":return Object(k.a)({},e,{quote:t.quote});default:return e}}(e,t);return localStorage.setItem("swc-api-demo",JSON.stringify({address:a.address,identity:a.identity,bankDetails:a.bankDetails})),a},q=function(e){return O({hasUserAcceptedTermsAndConditions:!0,address:e},w)},C=function(e){var t=e.errorMessage;return c.a.createElement("div",{className:"c-quote__error"},t)},T=function(){var e=d(),t=Object(l.a)(e,1)[0].address,a=Object(n.useState)(!1),r=Object(l.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(null),m=Object(l.a)(u,2),p=m[0],E=m[1],f=d(),_=Object(l.a)(f,2),b=_[0].quote,N=_[1],w=function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,q(t);case 4:a=e.sent,N(j(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),E(e.t0.message);case 11:o(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),y=b&&b.tariffs&&b.tariffs.length>0,O=y&&b.tariffs[0];return c.a.createElement("div",{className:"c-quote".concat(y?" c-quote__button-shown":"")},s?c.a.createElement(g,null,"Getting your quote..."):y?c.a.createElement(i.b,{className:"c-quote__switch-user",to:"/switch"},"Switch my energy and save \xa3",O.annualSaving.toFixed(0)):p?c.a.createElement(C,{errorMessage:p}):c.a.createElement(S,{onClick:w},c.a.createElement("span",{className:"c-quote__save-more"},"Want to save money on your energy?"),c.a.createElement("br",null),"Click here to find out how much you could save"))},A=function(e){var t=e.transaction,a=e.showQuote;return c.a.createElement("div",{className:"c-transaction-row"},c.a.createElement("div",{className:"c-transaction-row__date"},t.date),c.a.createElement("div",{className:"c-transaction-row__inner"},c.a.createElement("div",null,c.a.createElement("p",{className:"c-transaction-row__to"},t.to),t.reference&&c.a.createElement("p",{className:"c-transaction-row__reference"},t.reference)),c.a.createElement("div",null,c.a.createElement("p",{className:"c-transaction-row__amount"},"\xa3",t.amount))),a&&c.a.createElement(T,null))},P=function(){return c.a.createElement("div",{className:"c-transactions"},E.map((function(e,t){return c.a.createElement(A,{key:t,transaction:e,showQuote:1===t})})))},D=a(5),L=(a(40),function(e){var t=e.fuelName,a=e.fuelEstimate;return a.hasFuel?c.a.createElement("tr",null,c.a.createElement("td",null,t),c.a.createElement("td",null,a.supplierName),c.a.createElement("td",null,a.tariffName),c.a.createElement("td",null,a.isPrepay?"Prepay":"Credit"),c.a.createElement("td",null,a.kwUsagePerMonth.toFixed(0),"kW")):null}),R=function(e){var t=e.estimate;return c.a.createElement("div",{className:"c-estimate-summary"},c.a.createElement("p",null,"We have made this estimate based on these details:"),c.a.createElement("table",{className:"c-estimate-summary__table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Fuel Type"),c.a.createElement("th",null,"Supplier Name"),c.a.createElement("th",null,"Tariff Name"),c.a.createElement("th",null,"Payment Type"),c.a.createElement("th",null,"KwH Usage Per Month"))),c.a.createElement("tbody",null,c.a.createElement(L,{fuelName:"Electricity",fuelEstimate:t.elec}),c.a.createElement(L,{fuelName:"Gas",fuelEstimate:t.gas}))))},U=(a(41),function(e){var t=e.topTariff;return c.a.createElement("div",{className:"c-top-quote"},c.a.createElement("div",{className:"c-top-quote__top-row"},c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("img",{className:"c-top-quote__supplier-logo",src:t.supplierLogoUrl,alt:"Supplier logo"})),c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("div",{className:"c-top-quote__cost-text"},"Estimated cost"),c.a.createElement("div",{className:"c-top-quote__cost"},c.a.createElement("span",{className:"c-top-quote__currency"},"\xa3"),t.annualCost.toFixed(0)),c.a.createElement("div",{className:"c-top-quote__cost-text"},"per year")),c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("div",{className:"c-top-quote__cost-text"},"You save"),c.a.createElement("div",{className:"c-top-quote__saving"},c.a.createElement("span",{className:"c-top-quote__currency"},"\xa3"),t.annualSaving.toFixed(0)),c.a.createElement("div",{className:"c-top-quote__cost-text"},"per year"))),c.a.createElement("div",{className:"c-top-quote__bottom-row"},c.a.createElement("span",{className:"c-top-quote__supplier-name"},t.supplierName),"\xa0",t.tariffName))}),I=(a(42),a(43),function(e){var t=e.onClick,a=e.children;return c.a.createElement("button",{className:"c-btn c-outline-btn",onClick:t},a)}),B=function(e,t,a){var n=Object(k.a)({userId:e},t,{bankDetails:a});return O(n,y)},F=function(e){var t=e.topTariff,a=e.userId,r=d(),s=Object(l.a)(r,1)[0],o=s.identity,i=s.bankDetails,u=Object(n.useState)(null),m=Object(l.a)(u,2),p=m[0],E=m[1],f=Object(n.useState)(null),_=Object(l.a)(f,2),b=_[0],N=_[1],w=Object(n.useState)(!1),y=Object(l.a)(w,2),S=y[0],O=y[1],j=function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,B(a,o,i);case 4:t=e.sent,E(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N(e.t0.message);case 11:O(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"c-switch-user-button"},p||b||S?c.a.createElement("div",{className:"c-switch-user-button__result"},S?c.a.createElement(g,null,"Switching your energy..."):b||"Switch successful"):c.a.createElement("div",{className:"c-switch-user-button__btn"},c.a.createElement(I,{onClick:j},"Switch now and save \xa3",t.annualSaving.toFixed(0))))},H=(a(44),function(){var e=d(),t=Object(l.a)(e,1)[0],a=t.address,n=t.quote;if(!n)return c.a.createElement(D.a,{to:"/"});var r=n.tariffs[0];return c.a.createElement("div",{className:"c-switch-user"},c.a.createElement("div",{className:"c-switch-user__top-quote-text"},"Your top quote for ",a.addressLine1,":"),c.a.createElement(U,{topTariff:r}),c.a.createElement(R,{estimate:n.estimate}),c.a.createElement(F,{userId:n.userId,topTariff:r}))}),M=a(13),J=(a(45),a(46),function(e){var t=e.children,a=e.className,n=e.type,r=void 0===n?"text":n,s=e.placeholder,l=e.onChange,o=e.value;return c.a.createElement("input",{className:"".concat(a||""," c-input"),placeholder:s,type:r,value:o,onChange:function(e){return l(e.target.value)}},t)}),K=function(){var e=d(),t=Object(l.a)(e,2),a=t[0].address,r=t[1],s=Object(n.useState)({postcode:a.postcode,addressLine1:a.addressLine1}),o=Object(l.a)(s,2),i=o[0],u=o[1],m=function(e,t){u(Object(k.a)({},i,Object(M.a)({},e,t)))};return c.a.createElement("div",{className:"c-details"},c.a.createElement("label",{className:"c-details__field"},"Postcode",c.a.createElement(J,{className:"c-details__input",onChange:function(e){return m("postcode",e)},type:"text",value:i.postcode})),c.a.createElement("label",{className:"c-details__field"},"Address Line 1",c.a.createElement(J,{className:"c-details__input",onChange:function(e){return m("addressLine1",e)},type:"text",value:i.addressLine1})),c.a.createElement("div",{className:"c-details__update-btn"},c.a.createElement(I,{onClick:function(){r(function(e){return{address:e,type:"SET_ADDRESS"}}(i)),window.history.back()}},"Update details")))};s.a.render(c.a.createElement((function(){return c.a.createElement(m,{initialState:JSON.parse(localStorage.getItem("swc-api-demo"))||{address:{addressLine1:"192a Kingsland Road",postcode:"E28EB"},identity:{title:"Mr",firstName:"John",lastName:"Smith",email:"john.smith@email.co.uk",phoneNumber:"07950450297",dateOfBirth:"1989-05-25",monthsAtCurrentAddress:50},bankDetails:{accountNumber:"14457846",sortCode:"40-47-84"}},reducer:x},c.a.createElement(i.a,null,c.a.createElement("div",{className:"c-app"},c.a.createElement(p,null),c.a.createElement("div",{className:"c-app__inner"},c.a.createElement(D.d,null,c.a.createElement(D.b,{path:"/switch"},c.a.createElement(H,null)),c.a.createElement(D.b,{path:"/details"},c.a.createElement(K,null)),c.a.createElement(D.b,{path:"/"},c.a.createElement(P,null)))))))}),null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.1e713ffd.chunk.js.map