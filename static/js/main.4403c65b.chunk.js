(this["webpackJsonpswitcraft-api-demo"]=this["webpackJsonpswitcraft-api-demo"]||[]).push([[0],{23:function(e,t,a){e.exports=a(49)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),s=a.n(r),o=(a(28),a(10)),l=a(4),i=(a(29),a(1)),u=(a(30),function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:"32px",version:"1.1",viewBox:"0 0 32 32",width:"32px",xmlSpace:"preserve"},c.a.createElement("path",{d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"}))}),m=Object(n.createContext)(),d=function(e){var t=e.reducer,a=e.initialState,r=e.children;return c.a.createElement(m.Provider,{value:Object(n.useReducer)(t,a)},r)},p=function(){return Object(n.useContext)(m)},f=function(){var e=p(),t=Object(i.a)(e,1)[0].bankDetails;return c.a.createElement("header",{className:"c-top-bar"},c.a.createElement("h3",null,"Switchcraft Bank Account"),c.a.createElement("p",null,t.sortCode," ",t.accountNumber),c.a.createElement(o.b,{to:"/demo/details",className:"c-top-bar__burger-icon"},c.a.createElement(u,null)))},E=(a(36),[{date:"Today",to:"Tesco",amount:"3.00"},{date:"Yesterday",to:"British Gas",amount:"70.00",reference:"Gas and Electric"},{date:"18 February",to:"Jess Smith",amount:"300.00",reference:"Holiday"},{date:"17 February",to:"Landlord",amount:"1,000.00",reference:"House Rent"}]),h=a(6),v=a.n(h),_=a(8),b=a(11),w=Object({NODE_ENV:"production",PUBLIC_URL:"/switchcraft-api-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_BACKEND_URL:"https://api-staging.switchcraft.co.uk"}).REACT_APP_API_VERSION||"v1",N="".concat("https://api-staging.switchcraft.co.uk","/api/").concat(w),g="".concat(N,"/energy"),y="".concat(g,"/quote"),O="".concat(g,"/switch"),S=(a(38),function(e){var t=e.children;return c.a.createElement("div",{className:"c-loading"},t||"Loading...")}),x=(a(39),function(){var e=Object(b.a)(v.a.mark((function e(t,a){var n,c,r,s=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"POST",e.next=3,fetch(a,{headers:{"Content-Type":"application/json",Authorization:"switchcraft-test-key"},body:JSON.stringify(t),method:n});case 3:return c=e.sent,e.next=6,c.json();case 6:if(r=e.sent,200===c.status){e.next=9;break}throw r;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),j=function(e){return{quote:e,type:"SET_QUOTE"}},k=function(e,t){var a=function(e,t){switch(t.type){case"SET_DETAILS":return Object(_.a)({},e,{address:t.address,preferences:t.preferences,quote:null});case"SET_QUOTE":return Object(_.a)({},e,{quote:t.quote});default:return e}}(e,t);return localStorage.setItem("swc-api-demo-1.0.0",JSON.stringify({address:a.address,identity:a.identity,bankDetails:a.bankDetails,preferences:a.preferences})),a},T=function(){var e=Object(b.a)(v.a.mark((function e(t,a){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={hasUserAcceptedTermsAndConditions:!0,address:t},e.next=3,x(n,y);case 3:if(c=e.sent,!a||!a.warmHomeDiscount){e.next=6;break}return e.abrupt("return",Object(_.a)({},c,{tariffs:c.tariffs.filter((function(e){return e.hasWarmHomeDiscount}))}));case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(e){var t=e.errorMessage;return c.a.createElement("div",{className:"c-quote__error"},t)},C=function(){var e=p(),t=Object(i.a)(e,1)[0],a=t.address,r=t.preferences,s=Object(n.useState)(!1),l=Object(i.a)(s,2),u=l[0],m=l[1],d=Object(n.useState)(null),f=Object(i.a)(d,2),E=f[0],h=f[1],_=p(),w=Object(i.a)(_,2),N=w[0].quote,g=w[1],y=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,T(a,r);case 4:t=e.sent,g(j(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h(e.t0.message);case 11:m(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[]);var O=N&&N.tariffs&&N.tariffs.length>0,x=O&&N.tariffs[0];return c.a.createElement("div",{className:"c-quote".concat(O?" c-quote--button-shown":"")},u?c.a.createElement(S,null,"Checking how much you could save..."):O?c.a.createElement(o.b,{className:"c-quote__switch-user",to:"demo/switch"},"Switch energy and save \xa3",x.annualSaving.toFixed(0)," a year"):E&&c.a.createElement(q,{errorMessage:E}))},D=function(e){var t=e.transaction,a=e.showQuote;return c.a.createElement("div",{className:"c-transaction-row"},c.a.createElement("div",{className:"c-transaction-row__date"},t.date),c.a.createElement("div",{className:"c-transaction-row__inner"},c.a.createElement("div",null,c.a.createElement("p",{className:"c-transaction-row__to"},t.to),t.reference&&c.a.createElement("p",{className:"c-transaction-row__reference"},t.reference)),c.a.createElement("div",null,c.a.createElement("p",{className:"c-transaction-row__amount"},"\xa3",t.amount))),a&&c.a.createElement(C,null))},A=function(){return c.a.createElement("div",{className:"c-transactions"},E.map((function(e,t){return c.a.createElement(D,{key:t,transaction:e,showQuote:1===t})})))},H=(a(40),function(e){var t=e.fuelName,a=e.fuelEstimate;return a.hasFuel?c.a.createElement("tr",null,c.a.createElement("td",null,t),c.a.createElement("td",null,a.supplierName),c.a.createElement("td",null,a.tariffName),c.a.createElement("td",null,a.isPrepay?"Prepay":"Credit"),c.a.createElement("td",null,a.kwUsagePerMonth.toFixed(0),"kW")):null}),P=function(e){var t=e.estimate;return c.a.createElement("div",{className:"c-estimate-summary"},c.a.createElement("p",null,"We have made this estimate based on these details:"),c.a.createElement("table",{className:"c-estimate-summary__table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Fuel Type"),c.a.createElement("th",null,"Supplier Name"),c.a.createElement("th",null,"Tariff Name"),c.a.createElement("th",null,"Payment Type"),c.a.createElement("th",null,"KwH Usage Per Month"))),c.a.createElement("tbody",null,c.a.createElement(H,{fuelName:"Electricity",fuelEstimate:t.elec}),c.a.createElement(H,{fuelName:"Gas",fuelEstimate:t.gas}))))},I=(a(41),function(e){var t=e.topTariff,a=p(),n=Object(i.a)(a,2),r=n[0].preferences;n[1];return c.a.createElement("div",{className:"c-top-quote"},c.a.createElement("div",{className:"c-top-quote__top-row"},c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("img",{className:"c-top-quote__supplier-logo",src:t.supplierLogoUrl,alt:"Supplier logo"})),c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("div",{className:"c-top-quote__cost-text"},"Estimated cost"),c.a.createElement("div",{className:"c-top-quote__cost"},c.a.createElement("span",{className:"c-top-quote__currency"},"\xa3"),t.annualCost.toFixed(0)),c.a.createElement("div",{className:"c-top-quote__cost-text"},"per year")),c.a.createElement("div",{className:"c-top-quote__row-item"},c.a.createElement("div",{className:"c-top-quote__cost-text"},"You save"),c.a.createElement("div",{className:"c-top-quote__saving"},c.a.createElement("span",{className:"c-top-quote__currency"},"\xa3"),t.annualSaving.toFixed(0)),c.a.createElement("div",{className:"c-top-quote__cost-text"},"per year"))),c.a.createElement("div",{className:"c-top-quote__bottom-row"},c.a.createElement("span",{className:"c-top-quote__supplier-name"},t.supplierName),"\xa0",t.tariffName,r&&r.warmHomeDiscount&&c.a.createElement("span",{className:"c-top-quote__warm-home-discount"},"This tariff will preserve your warm home discount")))}),L=(a(42),a(43),a(44),function(e){var t=e.onClick,a=e.children;return c.a.createElement("button",{className:"c-btn c-outline-btn",onClick:t},a)}),B=function(e,t,a){var n=Object(_.a)({userId:e},t,{bankDetails:a});return x(n,O)},U=function(e){var t=e.topTariff,a=e.userId,r=p(),s=Object(i.a)(r,1)[0],o=s.identity,l=s.bankDetails,u=Object(n.useState)(null),m=Object(i.a)(u,2),d=m[0],f=m[1],E=Object(n.useState)(null),h=Object(i.a)(E,2),_=h[0],w=h[1],N=Object(n.useState)(!1),g=Object(i.a)(N,2),y=g[0],O=g[1],x=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,B(a,o,l);case 4:t=e.sent,f(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w(e.t0.message);case 11:O(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"c-switch-user-button"},d||_||y?c.a.createElement("div",{className:"c-switch-user-button__result"},y?c.a.createElement(S,null,"Switching your energy..."):_||"Switch successful"):c.a.createElement("div",{className:"c-switch-user-button__btn"},c.a.createElement(L,{onClick:x},"Switch now and save \xa3",t.annualSaving.toFixed(0))))},F=(a(45),function(){var e=p(),t=Object(i.a)(e,1)[0],a=t.address,n=t.quote;if(!n)return c.a.createElement(l.a,{to:"/"});var r=n.tariffs[0];return c.a.createElement("div",{className:"c-switch-user"},c.a.createElement("div",{className:"c-switch-user__top-quote-text"},"Your top quote for ",a.addressLine1,":"),c.a.createElement(I,{topTariff:r}),c.a.createElement(P,{estimate:n.estimate}),c.a.createElement(U,{userId:n.userId,topTariff:r}))}),R=a(22),M=a(13),J=(a(46),a(47),function(e){var t=e.children,a=e.className,n=e.type,r=void 0===n?"text":n,s=e.placeholder,o=e.onChange,l=e.value;return c.a.createElement("input",{className:"".concat(a||""," c-input"),placeholder:s,type:r,value:l,onChange:function(e){return o(e.target.value)}},t)}),W=function(e){var t=e.className,a=e.onChange,n=e.value;return c.a.createElement("input",{className:"".concat(t||""),type:"checkbox",checked:n,onChange:function(e){return a(e.target.checked)}})},K=function(e){var t=e.buttonText,a=void 0===t?"Update details":t,r=e.floatingButton,s=void 0===r||r,o=p(),u=Object(i.a)(o,2),m=u[0],d=m.address,f=m.preferences,E=u[1],h=Object(n.useState)({postcode:d.postcode,addressLine1:d.addressLine1,warmHomeDiscount:Boolean(f&&f.warmHomeDiscount)}),v=Object(i.a)(h,2),b=v[0],w=v[1],N=Object(n.useState)(!1),g=Object(i.a)(N,2),y=g[0],O=g[1],S=function(e,t){w(Object(_.a)({},b,Object(M.a)({},e,t)))};return y?c.a.createElement(l.a,{to:"/demo"}):c.a.createElement("div",{className:"c-details"},c.a.createElement("label",{className:"c-details__field"},"Postcode",c.a.createElement(J,{className:"c-details__input",onChange:function(e){return S("postcode",e)},type:"text",value:b.postcode})),c.a.createElement("label",{className:"c-details__field"},"Address Line 1",c.a.createElement(J,{className:"c-details__input",onChange:function(e){return S("addressLine1",e)},type:"text",value:b.addressLine1})),c.a.createElement("label",{className:"c-details__field c-details__field--boolean"},c.a.createElement(W,{className:"c-details__field__checkbox",value:b.warmHomeDiscount,onChange:function(e){return S("warmHomeDiscount",e)}}),"I want to keep my warm home discount"),c.a.createElement("div",{className:"c-details__update-btn".concat(s?" c-details__update-btn__floating":"")},c.a.createElement(L,{onClick:function(){var e=b.warmHomeDiscount,t=Object(R.a)(b,["warmHomeDiscount"]);E(function(e,t){return{address:e,preferences:t,type:"SET_DETAILS"}}(t,{warmHomeDiscount:e})),O(!0)}},a)))},z=function(e){var t=e.match;return c.a.createElement(o.a,null,c.a.createElement("div",{className:"c-demo"},c.a.createElement("div",{className:"c-demo__inner"},c.a.createElement(f,null),c.a.createElement("div",null,c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"".concat(t.path,"/switch")},c.a.createElement(F,null)),c.a.createElement(l.b,{path:"".concat(t.path,"/details")},c.a.createElement(K,null)),c.a.createElement(l.b,{path:"".concat(t.path,"/")},c.a.createElement(A,null)))))))},Q=(a(48),function(){return c.a.createElement("div",{className:"c-intro"},c.a.createElement("div",{className:"c-intro__text-section"},c.a.createElement("h2",{className:"c-intro__heading"},"Welcome to the Switchcraft API demo"),c.a.createElement("p",null,"Enter your address to see an example of how you might use the Switchcraft API.")),c.a.createElement("div",{className:"c-intro__details"},c.a.createElement(K,{buttonText:"Start demo",floatingButton:!1})))});s.a.render(c.a.createElement((function(){return c.a.createElement(d,{initialState:JSON.parse(localStorage.getItem("swc-api-demo-1.0.0"))||{address:{addressLine1:"192a Kingsland Road",postcode:"E28EB"},identity:{title:"Mr",firstName:"John",lastName:"Smith",email:"john.smith@email.co.uk",phoneNumber:"07950450297",dateOfBirth:"1989-05-25",monthsAtCurrentAddress:50},bankDetails:{accountNumber:"14457846",sortCode:"40-47-84"},preferences:{warmHomeDiscount:!1}},reducer:k},c.a.createElement(o.a,null,c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/demo",component:z}),c.a.createElement(l.b,{path:"/",component:Q}))))}),null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4403c65b.chunk.js.map